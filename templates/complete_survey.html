<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Complete Applications</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style2.css') }}">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
		integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- DataTables CSS -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">

  <!-- Custom Dashboard CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='complete_survey.css') }}">
</head>
<body>

<div class="dashboard">
		<!-- Sidebar -->
		<aside class="sidebar" id="sidebar">
			<button id="closeBtn" aria-label="Close Menu">&times;</button>
			<img src="{{ url_for('static', filename='slmg-logo-white.png') }}" alt="SLMG Logo" title="SLMG"
				style="width:100%;" />
			<a href="{{ url_for('user_dashboard') }}">Dashboard</a>
			<a href="{{ url_for('outlet_survey') }}">Outlet Survey</a>
			<a class="active" href="{{ url_for('complete_survey') }}">All Completed</a>
			<a href="{{ url_for('new_complete_outlet') }}">New Complete Outlet List</a>
			<a href="{{ url_for('logout') }}">Logout</a>
			<div class="side-footer-img">
				<img src="{{ url_for('static', filename='bottle-logo.webp') }}" alt="SLMG Logo" title="SLMG" />
			</div>
		</aside>


		<!-- Overlay -->
		<div class="overlay" id="overlay"></div>
		<section class="outer-container">
			<!-- Main Content -->
			<main class="main-content">
				<!-- Topbar -->
				<header class="topbar">
					<!-- Welcome Banner -->
					<div class="content">
						<h1>Complete Applications - {{ user.EMP_NAME }}</h1>
						<p>All Complete Record</p>
					</div>
					<!-- Hamburger Icon -->
					<div class="hamburger" id="hamburger" aria-label="Open Menu" role="button" tabindex="0">
						<div></div>
						<div></div>
						<div></div>
					</div>

					<div class="user-info">
						<!-- <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="user-icon" /> -->
						<span class="user-icon"><i class="fa fa-user" aria-hidden="true"></i></span>
						<div class="user-content">
							<strong>{{ user.EMP_NAME }}</strong><br />
							<small>{{ user.EMAIL_ID }}</small>
						</div>
					</div>
				</header>

				<!-- Cards Section -->
				 <!-- Table Content -->
  <div class="">
    <div class="card shadow-sm">
      <div class="card-body">
        <table id="completeSurveyTable" class="display" style="width:100%">
          <thead>
              <tr>
                  <th>Transaction ID</th>
                  <th>Status</th>
                  <th>Outlet Code</th>
                  <th>Outlet Name</th>
                  <th>Phone No</th>
                  <th>Address</th>
                  <th>Distributor Code</th>
                  <th>Distributor Name</th>
                  <th>Action</th>
              </tr>
          </thead>
              <tbody>
                  {% for row in data %}
                  <tr>
                      <td>{{ row.TRANSACTIONS_ID }}</td>
                      <td>{{ row.STATUS }}</td>
                      <td>{{ row.OUTLET_CODE }}</td>
                      <td>{{ row.OUTLET_NAME }}</td>
                      <td>{{ row.OUTLET_MOBILE }}</td>
                      <td>{{ row.OUTLET_ADDRESS }}</td>
                      <td>{{ row.DISTRIBUTOR_CODE }}</td>
                      <td>{{ row.DISTRIBUTOR_NAME }}</td>
                      <td class="btn-view-data">
                      <a href="{{ url_for('view_data', transaction_id=row.TRANSACTIONS_ID) }}" class="btn-view btn btn-sm btn-primary" target="_blank">View Data</a>
                      <!-- <a href="{{ url_for('generate_pdf', transaction_id=row.TRANSACTIONS_ID) }}" class="btn-complete btn btn-sm btn-success" target="_blank">Complete PDF</a> -->
                    </td>
                  </tr>
                  {% endfor %}
              </tbody>
          </table>

      </div>
    </div>
  </div>
			</main>
		</section>
	</div>

  <!-- JS Scripts -->
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

  <script>
    $(document).ready(function () {
      $('#completeSurveyTable').DataTable({
        responsive: true,
        autoWidth: false
      });
    });
  </script>
<script>
		const hamburger = document.getElementById('hamburger');
		const sidebar = document.getElementById('sidebar');
		const overlay = document.getElementById('overlay');
		const closeBtn = document.getElementById('closeBtn');

		function openSidebar() {
			sidebar.classList.add('show');
			overlay.classList.add('show');
		}

		function closeSidebar() {
			sidebar.classList.remove('show');
			overlay.classList.remove('show');
		}

		hamburger.addEventListener('click', openSidebar);
		closeBtn.addEventListener('click', closeSidebar);
		overlay.addEventListener('click', closeSidebar);

		// Keyboard accessibility for hamburger
		hamburger.addEventListener('keydown', function (e) {
			if (e.key === 'Enter' || e.key === ' ') {
				e.preventDefault();
				openSidebar();
			}
		});

		// Keyboard accessibility for close button
		closeBtn.addEventListener('keydown', function (e) {
			if (e.key === 'Enter' || e.key === ' ') {
				e.preventDefault();
				closeSidebar();
			}
		});
	</script>

</body>
</html>
